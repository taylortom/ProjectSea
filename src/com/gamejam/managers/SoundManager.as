package com.gamejam.managers{	// Flash imports	import flash.events.Event;	import flash.media.Sound;		import com.gamejam.media.Audio;		/**	 * Controls the sound	 */	public class SoundManager 	{			private static var _instance:SoundManager;		private static var allowInstantiation:Boolean = true;				private var _playingSounds:Array = new Array();			public function SoundManager()		{				if (!allowInstantiation) throw new Error("SoundManager.SoundManager: ERROR: Instantiation failed: Use GameView.getInstance()");					}				public static function getInstance():SoundManager 		{			if (_instance == null) 			{				_instance = new SoundManager();				allowInstantiation = false;			}						return _instance;		}				public function play(soundToPlay:Sound, volume:Number = 1.0, fadeDuration:Number = 0.0, loop:Boolean = false):Audio		{			var audio:Audio = new Audio(soundToPlay, loop);			audio.fadeIn(fadeDuration);						if(fadeDuration == 0) audio.volume = volume;						audio.channel.addEventListener(Event.SOUND_COMPLETE, this.onSoundComplete);			this._playingSounds.push(audio);						return audio;		}				public function playEffect(soundToPlay:Sound, volume:Number = 1.0):void		{			var audio:Audio = new Audio(soundToPlay);			audio.volume = volume;			audio.start();		}						public function crossfade(soundToPlay:Sound, fadeDuration:Number, loop:Boolean = false):void		{			for(var i = 0; i < this._playingSounds.length; i++)			{				var track:Audio = this._playingSounds[i];				//track.fadeOut(fadeDuration);				track.stop();			}						var audio:Audio = new Audio(soundToPlay, loop);			audio.fadeIn(fadeDuration);								audio.channel.addEventListener(Event.SOUND_COMPLETE, this.onSoundComplete);			this._playingSounds.push(audio);		}				public function stop():void		{			for(var i = 0; i < this._playingSounds.length; i++)			{				var track:Audio = this._playingSounds[i];				track.stop();			}						this._playingSounds = new Array();		}				private function onSoundComplete(e:Event):void		{			// trace("SoundManager.onSoundComplete: " + e);					}	}}